<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Premium Drink Subscription - Product Page</title>
     <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      @keyframes slideIn {
        from {
          transform: translateX(400px);
          opacity: 0;
        }
        to {
          transform: translateX(0);
          opacity: 1;
        }
      }

      @keyframes slideOut {
        from {
          transform: translateX(0);
          opacity: 1;
        }
        to {
          transform: translateX(400px);
          opacity: 0;
        }
      }

      .toast {
        animation: slideIn 0.3s ease;
      }

      .toast.hide {
        animation: slideOut 0.3s ease forwards;
      }

      .flavor-swatch.active {
        @apply border-black shadow-lg;
      }

      .purchase-option.active {
        @apply border-black bg-gray-50;
      }

      .thumbnail.active {
        @apply border-black;
      }
    </style>
  </head>
  <body class="bg-gray-50">
    <div class="w-full max-w-6xl mx-auto px-4 sm:px-6 py-6 sm:py-8">
      <div
        class="grid grid-cols-1 lg:grid-cols-2 gap-6 sm:gap-8 lg:gap-12 mb-8 lg:mb-12"
      >
        <!-- Product Gallery -->
        <div class="product-gallery flex flex-col gap-4">
          <div
            class="main-image-container relative w-full aspect-square bg-white rounded-lg lg:rounded-xl overflow-hidden flex items-center justify-center"
          >
            <img
              id="mainImage"
              src="https://via.placeholder.com/500x500?text=Drink+Product"
              alt="Product Image"
              class="w-full h-full object-cover"
            />
            <button
              class="gallery-prev absolute left-2 sm:left-4 top-1/2 -translate-y-1/2 bg-white bg-opacity-80 hover:bg-opacity-100 rounded-full p-2 sm:p-3 transition z-10"
            >
              <svg
                class="w-5 h-5 sm:w-6 sm:h-6"
                stroke="currentColor"
                stroke-width="2"
                fill="none"
                viewBox="0 0 24 24"
              >
                <path d="M15 19l-7-7 7-7"></path>
              </svg>
            </button>
            <button
              class="gallery-next absolute right-2 sm:right-4 top-1/2 -translate-y-1/2 bg-white bg-opacity-80 hover:bg-opacity-100 rounded-full p-2 sm:p-3 transition z-10"
            >
              <svg
                class="w-5 h-5 sm:w-6 sm:h-6"
                stroke="currentColor"
                stroke-width="2"
                fill="none"
                viewBox="0 0 24 24"
              >
                <path d="M9 5l7 7-7 7"></path>
              </svg>
            </button>
          </div>

          <div
            class="thumbnail-gallery flex gap-2 sm:gap-3 overflow-x-auto pb-2"
            id="thumbnailGallery"
          >
            <!-- Thumbnails generated by JS -->
          </div>
        </div>

        <!-- Product Details -->
        <div class="product-details flex flex-col">
          <h1
            class="product-title text-2xl sm:text-3xl lg:text-4xl font-bold mb-2 sm:mb-4"
          >
            Lorem Ipsum
          </h1>

          <div class="product-rating flex items-center mb-6 sm:mb-8 gap-2">
            <div class="stars flex gap-1">
              <svg
                class="star w-4 h-4 sm:w-5 sm:h-5 fill-yellow-400"
                viewBox="0 0 20 20"
              >
                <path
                  d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"
                />
              </svg>
              <svg
                class="star w-4 h-4 sm:w-5 sm:h-5 fill-yellow-400"
                viewBox="0 0 20 20"
              >
                <path
                  d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"
                />
              </svg>
              <svg
                class="star w-4 h-4 sm:w-5 sm:h-5 fill-yellow-400"
                viewBox="0 0 20 20"
              >
                <path
                  d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"
                />
              </svg>
              <svg
                class="star w-4 h-4 sm:w-5 sm:h-5 fill-yellow-400"
                viewBox="0 0 20 20"
              >
                <path
                  d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"
                />
              </svg>
              <svg
                class="star w-4 h-4 sm:w-5 sm:h-5 fill-yellow-400"
                viewBox="0 0 20 20"
              >
                <path
                  d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"
                />
              </svg>
            </div>
            <span class="review-count text-xs sm:text-sm text-gray-600"
              >(245 reviews)</span
            >
          </div>

          <!-- Purchase Options -->
          <div class="purchase-options mb-6 sm:mb-8">
            <h3
              class="section-title text-base sm:text-lg font-semibold mb-3 sm:mb-4"
            >
              Select Your Plan
            </h3>
            <div class="options-group flex flex-col gap-2 sm:gap-3">
              <label
                class="purchase-option option-label active flex items-start p-3 sm:p-4 border-2 border-gray-200 rounded-lg cursor-pointer hover:border-gray-400 transition"
                data-mode="single"
              >
                <input
                  type="radio"
                  name="purchase_mode"
                  value="single"
                  checked
                  class="w-5 h-5 text-green-600 mt-0.5 mr-3 flex-shrink-0 accent-green-600"
                />
                <div class="option-content flex-1">
                  <h4 class="font-semibold text-gray-900 text-sm sm:text-base">
                    Single Drink Subscription
                  </h4>
                  <p class="text-xs sm:text-sm text-gray-600">
                    Monthly delivery of one flavor
                  </p>
                </div>
              </label>

              <label
                class="purchase-option option-label flex items-start p-3 sm:p-4 border-2 border-gray-200 rounded-lg cursor-pointer hover:border-gray-400 transition"
                data-mode="double"
              >
                <input
                  type="radio"
                  name="purchase_mode"
                  value="double"
                  class="w-5 h-5 text-green-600 mt-0.5 mr-3 flex-shrink-0 accent-green-600"
                />
                <div class="option-content flex-1">
                  <h4 class="font-semibold text-gray-900 text-sm sm:text-base">
                    Double Drink Subscription
                  </h4>
                  <p class="text-xs sm:text-sm text-gray-600">
                    Monthly delivery of two flavors
                  </p>
                </div>
              </label>
            </div>
          </div>

          <!-- Flavor Selection -->
          <div class="flavor-selection mb-6 sm:mb-8">
            <h3 class="section-title text-base sm:text-lg font-semibold mb-4">
              Select Your Flavors
            </h3>

            <div class="flavor-selector" data-flavor="flavor-1">
              <label
                class="flavor-label text-xs sm:text-sm font-medium text-gray-700 mb-3"
              >
                Flavor 1
                <span class="required text-red-500">*</span>
              </label>
              <div class="flavor-swatches flex gap-2 sm:gap-4 mb-2">
                <button
                  class="flavor-swatch w-16 h-16 sm:w-20 sm:h-20 border-3 border-gray-300 rounded-lg hover:border-gray-500 hover:scale-105 transition flex-shrink-0"
                  data-flavor-name="Chocolate"
                  style="background-color: #7b5f4f"
                ></button>
                <button
                  class="flavor-swatch w-16 h-16 sm:w-20 sm:h-20 border-3 border-gray-300 rounded-lg hover:border-gray-500 hover:scale-105 transition flex-shrink-0"
                  data-flavor-name="Vanilla"
                  style="background-color: #f5e6d3"
                ></button>
                <button
                  class="flavor-swatch w-16 h-16 sm:w-20 sm:h-20 border-3 border-gray-300 rounded-lg hover:border-gray-500 hover:scale-105 transition flex-shrink-0"
                  data-flavor-name="Orange"
                  style="background-color: #e8956e"
                ></button>
              </div>
              <div class="flavor-selected text-xs text-gray-600 mt-2">
                Selected: <strong>-</strong>
              </div>
            </div>

            <div class="flavor-selector hidden" data-flavor="flavor-2">
              <label
                class="flavor-label text-xs sm:text-sm font-medium text-gray-700 mb-3"
              >
                Flavor 2
                <span class="required text-red-500">*</span>
              </label>
              <div class="flavor-swatches flex gap-2 sm:gap-4 mb-2">
                <button
                  class="flavor-swatch w-16 h-16 sm:w-20 sm:h-20 border-3 border-gray-300 rounded-lg hover:border-gray-500 hover:scale-105 transition flex-shrink-0"
                  data-flavor-name="Chocolate"
                  style="background-color: #7b5f4f"
                ></button>
                <button
                  class="flavor-swatch w-16 h-16 sm:w-20 sm:h-20 border-3 border-gray-300 rounded-lg hover:border-gray-500 hover:scale-105 transition flex-shrink-0"
                  data-flavor-name="Vanilla"
                  style="background-color: #f5e6d3"
                ></button>
                <button
                  class="flavor-swatch w-16 h-16 sm:w-20 sm:h-20 border-3 border-gray-300 rounded-lg hover:border-gray-500 hover:scale-105 transition flex-shrink-0"
                  data-flavor-name="Orange"
                  style="background-color: #e8956e"
                ></button>
              </div>
              <div class="flavor-selected text-xs text-gray-600 mt-2">
                Selected: <strong>-</strong>
              </div>
            </div>
          </div>

          <!-- Pricing -->
          <div
            class="pricing-box bg-white p-4 sm:p-6 rounded-lg border border-gray-200 mb-4 sm:mb-6"
          >
            <div class="space-y-3">
              <div
                class="price-row flex justify-between items-center text-xs sm:text-sm"
              >
                <span class="price-label text-gray-600">Regular Price:</span>
                <span class="price-value font-semibold" id="originalPrice"
                  >$54.99</span
                >
              </div>
              <div
                class="price-row flex justify-between items-center text-xs sm:text-sm"
              >
                <span class="price-label text-gray-600"
                  >Subscription (25% off):</span
                >
                <span class="price-value font-semibold" id="subscriptionPrice"
                  >$41.24</span
                >
              </div>
              <div
                class="price-row divider flex justify-between items-center border-t pt-3"
              >
                <span class="price-label font-semibold"
                  >Final Price (20% discount):</span
                >
                <span
                  class="final-price text-green-600 font-bold text-lg sm:text-xl"
                  id="finalPrice"
                  >$32.99</span
                >
              </div>
              <div class="savings-text text-xs text-gray-500">
                You save <strong id="savingsAmount">$22.00</strong> with
                subscription
              </div>
            </div>
          </div>

          <!-- Add to Cart Button -->
          <button
            class="add-to-cart-btn w-full bg-black text-white py-3 sm:py-4 rounded-lg font-semibold hover:bg-gray-900 active:scale-95 transition mb-4"
            id="addToCartBtn"
          >
            Add to Cart
          </button>

          <!-- What's Included -->
          <div class="whats-included bg-gray-100 p-4 sm:p-6 rounded-lg">
            <h4 class="font-semibold mb-4 text-gray-900 text-sm sm:text-base">
              What's Included
            </h4>
            <ul class="included-list space-y-2" id="includedList">
              <li
                class="included-item flex items-start text-xs sm:text-sm text-gray-700"
              >
                <span class="text-green-600 font-bold mr-2 flex-shrink-0"
                  >✓</span
                >
                Monthly delivery
              </li>
              <li
                class="included-item flex items-start text-xs sm:text-sm text-gray-700"
              >
                <span class="text-green-600 font-bold mr-2 flex-shrink-0"
                  >✓</span
                >
                Free shipping on orders over $50
              </li>
              <li
                class="included-item flex items-start text-xs sm:text-sm text-gray-700"
              >
                <span class="text-green-600 font-bold mr-2 flex-shrink-0"
                  >✓</span
                >
                Cancel anytime
              </li>
              <li
                class="included-item flex items-start text-xs sm:text-sm text-gray-700"
              >
                <span class="text-green-600 font-bold mr-2 flex-shrink-0"
                  >✓</span
                >
                Exclusive member benefits
              </li>
            </ul>
          </div>
        </div>
      </div>

      <!-- Product Description -->
      <div
        class="product-description bg-white p-4 sm:p-6 rounded-lg lg:rounded-xl border border-gray-200"
      >
        <h3 class="text-xl sm:text-2xl font-bold mb-4">About This Product</h3>
        <p class="mb-3 sm:mb-4 text-gray-700 text-sm sm:text-base">
          Premium quality drink with carefully selected flavors. Lorem ipsum
          dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor
          incididunt ut labore et dolore magna aliqua.
        </p>
        <p class="text-gray-700 text-sm sm:text-base">
          Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris
          nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in
          reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla
          pariatur.
        </p>
      </div>
    </div>

    <script>
      // Product data
      const productData = {
        title: "Lorem Ipsum",
        images: [
          "https://images.meesho.com/images/products/459606124/vtn2o_512.avif?width=512",
          "https://encrypted-tbn0.gstatic.com/shopping?q=tbn:ANd9GcSWbrYHfAVQ1FodiT8pXh1ql3C1NiyJSxHhQP81no-4S7xP_B29GUWTOlU_XHLGjmWWp8lsposxY8XmO_ItQWaTIJquEnHVliMSW-dMVm5ubLm2-7xfwcgU8Q&usqp=CAc",
          "https://encrypted-tbn2.gstatic.com/shopping?q=tbn:ANd9GcSoQEDRAd8FjIRDJtgr7ObMos9uGhFPacqSQqtbRmfYpRU-wGX-lKEUBQ9KVNzTiy8pf8PASJFu2r4hs5lL5YdDw1qwhrv8HN53F7BH4oQS09A52ac4PyVgJmqSnIY3RA9Xu_6ZiSoKRw&usqp=CAc",
          "data:image/jpeg;base64,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",
          "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ2_9pEhgf2b6qdiQdm5dQ6smyWG5YvfusBEg&s",
        ],
        basePrice: 54.99,
        flavors: ["Chocolate", "Vanilla", "Orange"],
      };

      // State management
      let state = {
        currentImageIndex: 0,
        purchaseMode: "singhttpsle",
        selectedFlavors: {
          "flavor-1": null,
          "flavor-2": null,
        },
      };

      // Initialize
      function init() {
        generateThumbnails();
        setDefaultSelection();
        attachEventListeners();
      }

      // Generate thumbnail gallery
      function generateThumbnails() {
        const gallery = document.getElementById("thumbnailGallery");
        productData.images.forEach((image, index) => {
          const thumb = document.createElement("button");
          thumb.className = "thumbnail" + (index === 0 ? " active" : "");
          thumb.innerHTML = `<img src="${image}" alt="Product thumbnail ${
            index + 1
          }">`;
          thumb.addEventListener("click", () => selectImage(index));
          gallery.appendChild(thumb);
        });
      }

      // Set default selection
      function setDefaultSelection() {
        state.selectedFlavors["flavor-1"] = "Chocolate";
        updateUI();
      }

      // Event listeners
      function attachEventListeners() {
        // Gallery navigation
        document
          .querySelector(".gallery-prev")
          .addEventListener("click", previousImage);
        document
          .querySelector(".gallery-next")
          .addEventListener("click", nextImage);

        // Purchase mode
        document
          .querySelectorAll('[name="purchase_mode"]')
          .forEach((option) => {
            option.addEventListener("change", onPurchaseModeChange);
          });

        // Flavor selection
        document.querySelectorAll(".flavor-swatch").forEach((swatch) => {
          swatch.addEventListener("click", selectFlavor);
        });

        // Add to cart
        document
          .getElementById("addToCartBtn")
          .addEventListener("click", addToCart);
      }

      // Image gallery functions
      function previousImage() {
        state.currentImageIndex =
          (state.currentImageIndex - 1 + productData.images.length) %
          productData.images.length;
        updateMainImage();
      }

      function nextImage() {
        state.currentImageIndex =
          (state.currentImageIndex + 1) % productData.images.length;
        updateMainImage();
      }

      function selectImage(index) {
        state.currentImageIndex = index;
        updateMainImage();
      }

      function updateMainImage() {
        const mainImage = document.getElementById("mainImage");
        mainImage.src = productData.images[state.currentImageIndex];

        // Update thumbnail active state
        document.querySelectorAll(".thumbnail").forEach((thumb, index) => {
          thumb.classList.toggle("active", index === state.currentImageIndex);
        });
      }

      // Purchase mode handling
      function onPurchaseModeChange(e) {
        state.purchaseMode = e.target.value;
        state.selectedFlavors["flavor-2"] = null;
        updateUI();
      }

      // Flavor selection
      function selectFlavor(e) {
        const flavor = e.target.dataset.flavorName;
        const parentSelector = e.target.closest(".flavor-selector");
        const flavorType = parentSelector.dataset.flavor;

        // Remove active from siblings
        parentSelector
          .querySelectorAll(".flavor-swatch")
          .forEach((s) => s.classList.remove("active"));

        // Add active to clicked
        e.target.classList.add("active");

        // Update state
        state.selectedFlavors[flavorType] = flavor;
        parentSelector.querySelector(".flavor-selected strong").textContent =
          flavor;

        updatePricing();
      }

      // Update UI based on state
      function updateUI() {
        updateFlavorSelectors();
        updatePurchaseOptions();
        updateWhatsIncluded();
        updatePricing();
      }

      function updateFlavorSelectors() {
        document.querySelectorAll(".flavor-selector").forEach((selector) => {
          const flavorType = selector.dataset.flavor;
          if (state.purchaseMode === "single" && flavorType === "flavor-2") {
            selector.classList.add("hidden");
          } else if (
            state.purchaseMode === "double" &&
            flavorType === "flavor-2"
          ) {
            selector.classList.remove("hidden");
          }
        });
      }

      function updatePurchaseOptions() {
        document.querySelectorAll(".option-label").forEach((option) => {
          const radio = option.querySelector('input[type="radio"]');
          option.classList.toggle("active", radio.checked);
        });
      }

      function updateWhatsIncluded() {
        const listElement = document.getElementById("includedList");
        const items =
          state.purchaseMode === "single"
            ? [
                { text: "One flavor monthly" },
                { text: "Free shipping on orders over $50" },
                { text: "Cancel anytime" },
                { text: "Exclusive member benefits" },
              ]
            : [
                { text: "Two flavors monthly" },
                { text: "Mix and match flavors" },
                { text: "Free shipping on orders over $50" },
                { text: "Cancel anytime" },
                { text: "Exclusive member benefits" },
              ];

        listElement.innerHTML = items
          .map(
            (item) =>
              `<li class="included-item"><span>✓</span> ${item.text}</li>`
          )
          .join("");
      }

      // Pricing calculations
      function updatePricing() {
        const basePrice = productData.basePrice;
        const subscriptionDiscount = 0.25; // 25% off
        const salesDiscount = 0.2; // 20% off

        const subscriptionPrice = basePrice * (1 - subscriptionDiscount);
        const finalPrice = subscriptionPrice * (1 - salesDiscount);
        const savings = basePrice - finalPrice;

        document.getElementById("originalPrice").textContent =
          "$" + basePrice.toFixed(2);
        document.getElementById("subscriptionPrice").textContent =
          "$" + subscriptionPrice.toFixed(2);
        document.getElementById("finalPrice").textContent =
          "$" + finalPrice.toFixed(2);
        document.getElementById("savingsAmount").textContent =
          "$" + savings.toFixed(2);
      }

      // Add to cart
      function addToCart() {
        // Validate selections
        if (!state.selectedFlavors["flavor-1"]) {
          showToast("Please select Flavor 1", "error");
          return;
        }

        if (
          state.purchaseMode === "double" &&
          !state.selectedFlavors["flavor-2"]
        ) {
          showToast("Please select Flavor 2", "error");
          return;
        }

        // Build cart item
        const cartItem = {
          type:
            state.purchaseMode === "single" ? "Single Drink" : "Double Drink",
          flavor1: state.selectedFlavors["flavor-1"],
          flavor2: state.selectedFlavors["flavor-2"] || "N/A",
          price: document.getElementById("finalPrice").textContent,
          quantity: 1,
        };

        // Log cart item (in real app, send to backend)
        console.log("Added to cart:", cartItem);

        // Show success message
        showToast(`${cartItem.type} subscription added to cart!`, "success");

        // Reset to defaults after 2 seconds
        setTimeout(() => {
          state.purchaseMode = "single";
          state.selectedFlavors["flavor-1"] = "Chocolate";
          state.selectedFlavors["flavor-2"] = null;
          document.querySelector('[value="single"]').checked = true;
          updateUI();

          // Reset flavor swatches visual state
          document
            .querySelectorAll(".flavor-swatch")
            .forEach((s) => s.classList.remove("active"));
          document
            .querySelector(
              '[data-flavor="flavor-1"] [data-flavor-name="Chocolate"]'
            )
            .classList.add("active");
        }, 2000);
      }

      // Toast notification
      function showToast(message, type = "success") {
        const toast = document.createElement("div");
        toast.className = `toast ${type}`;
        toast.textContent = message;
        document.body.appendChild(toast);

        setTimeout(() => {
          toast.classList.add("hide");
          setTimeout(() => toast.remove(), 300);
        }, 3000);
      }

      // Start app
      init();
    </script>
  </body>
</html>
